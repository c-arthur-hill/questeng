{% extends "base.html" %}

{% block homelink %}active{% endblock %}
{% block title %}TalkWeird{% endblock %}
{% block header %}Talk Weird{% endblock %}
{% block content %}
{% for message in messages %}
    {% if message.question %}
    <p><strong>{{ message.question.text }}</strong></p>
    {% else %}
        <p>{{ message.answer.text }}</p>
    {% endif %}
{% endfor %}
<form action="{% if conversation_id %}{% url 'conversation_id' conversation_id %}{% else %}{% url 'conversation' %}{% endif %}" method="POST">
    <div class="background-1 padding-10">
        {% csrf_token %}
        {{ form.last_question }}
        {% for answer_input in form.answer|slice:"1:4" %}
            {{ answer_input }}
        {% endfor %}
        {{ form.answer|first }}
        {{ form.text }}
    </div>
    <div class="nav">
    <br>
	<input class="submit-button" type="submit" value="TALK">
    {# and has higher precedence than or #}
    {% if messages|length > 1 %}
    <a href="{% if conversation_id %}{% url 'question_id' conversation_id next_question_id %}{% else %}{% url 'question' next_question_id %}{% endif %}">Different Question</a>
    <span> | </span>
    {% endif %}
    </div>
</form>
<br>
{% if topics %}
    <h2>Topics</h2>
    {% for topic in topics %}
        <h3>{{ topic.description }}</h3>
        {% for icebreaker in topic.top_questions %}
        <a href="{% if conversation_id %}{% url 'question_id' conversation_id icebreaker.id %}{% else %}{% url 'question' icebreaker.id %}{% endif %}">{{ icebreaker.text }}</a><br>
        {% endfor %}
    {% endfor %}
{% endif %}
{% endblock %}
